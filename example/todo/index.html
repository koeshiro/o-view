<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title></title>
		<meta charset="utf-8">
		<script src="object-observe.min.js" type="text/javascript"></script>
		<script src="../../view.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="todo"></div>
		<script type="text/template" id="todo-temp">
			<ul>
				<@
					for(var k in list){
						each('<li>'+(list[k]['active']?list[k]['text']:"<b>"+list[k]['text']+"</b>")+'</li>\n');
					}
				@>
			</ul>
			<input type="text" name="add" /><div class="add">add</div>
		</script>
		<script type="text/javascript">
			var data={'list':[{"text":'1234','active':true},{"text":'1234','active':true},{"text":'1234','active':true},{"text":'1234','active':true},{"text":'1234','active':true}]},temp=new Templater(document.querySelector('#todo-temp').innerHTML,data);
			document.querySelector('#todo').innerHTML=temp;
			document.querySelector('.add').onclick=function(){
				data['list'].push({"text":document.querySelector('[name="add"]').value,'active':false});
			}
			Object.observe(data['list'],function(){
				document.querySelector('#todo').innerHTML=temp.rerender(data);
				document.querySelector('.add').onclick=function(){
					data['list'].push({"text":document.querySelector('[name="add"]').value});
				}
			});
		</script>
	</body>
</html>
